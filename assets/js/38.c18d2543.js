(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{384:function(v,_,t){"use strict";t.r(_);var a=t(0),r=Object(a.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h2",{attrs:{id:"问题点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题点"}},[v._v("#")]),v._v(" 问题点")]),v._v(" "),t("ol",[t("li",[t("p",[v._v("创建券 CMS")])]),v._v(" "),t("li",[t("p",[v._v("选择类型 参数 满减券 满多少 - 多少。 0.8 参数")])]),v._v(" "),t("li",[t("p",[v._v("审核券（不是必须的）")])]),v._v(" "),t("li",[t("p",[v._v("投放券（用户领取、直接发放）")])]),v._v(" "),t("li",[t("p",[v._v("领取（定时，抢券）")])]),v._v(" "),t("li",[t("p",[v._v("使用优惠券")])]),v._v(" "),t("li",[t("p",[v._v("优惠券核销（难点，前端算一次，服务端还要计算一次，以服务端为准）")])]),v._v(" "),t("li",[t("p",[v._v("退款 1000 - 200 ，用户买10件商品，只是退了部分几件商品，应该退多少钱，\n应该将优惠金额平摊到各个商品上（按百分比平摊、按利润平摊...)")])])]),v._v(" "),t("p",[v._v("优惠券模板 200-80  选择时间  （情人节券、中秋节券...）")]),v._v(" "),t("p",[v._v("活动(用来投放和领取优惠券) （情人节活动各种券 200-80 1000-500 全场-10 0.9）")]),v._v(" "),t("p",[v._v("品类（某张优惠券只能用在鞋类商品，全场券）")]),v._v(" "),t("p",[v._v("衍生出各种限定："),t("br"),v._v("\n分类 二级分类  一级分类  N级分类"),t("br"),v._v("\n一件商品适用  几件商品"),t("br"),v._v("\n店铺"),t("br"),v._v("\n品牌")]),v._v(" "),t("h2",{attrs:{id:"优惠券实体设计"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优惠券实体设计"}},[v._v("#")]),v._v(" 优惠券实体设计")]),v._v(" "),t("p",[v._v("Activity ActivityCover Coupon UserCoupon  (第三张表)")]),v._v(" "),t("h2",{attrs:{id:"活动、优惠券和分类之间的关系"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#活动、优惠券和分类之间的关系"}},[v._v("#")]),v._v(" 活动、优惠券和分类之间的关系")]),v._v(" "),t("p",[v._v("优惠券一定和活动是有关系")]),v._v(" "),t("ol",[t("li",[v._v("优惠券 -> 分类")]),v._v(" "),t("li",[v._v("活动 -> 分类")])]),v._v(" "),t("p",[v._v("案例：某个商品它能够使用哪些优惠券")]),v._v(" "),t("p",[v._v("SPU -> Category -> 优惠券")]),v._v(" "),t("p",[v._v("SPU -> Category -> Activity->优惠券")]),v._v(" "),t("h2",{attrs:{id:"优惠券过期问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优惠券过期问题"}},[v._v("#")]),v._v(" 优惠券过期问题")]),v._v(" "),t("p",[v._v("status 未使用 已使用 已过期")]),v._v(" "),t("p",[v._v("触发机制  寻找一种触发机制")]),v._v(" "),t("p",[v._v("1.主动触发")]),v._v(" "),t("p",[v._v("轮询 线程 1s 扫描数据库（优惠券） Coupon"),t("br"),v._v("\nStart-EndTime 数据库更新 Coupon Status -> Status")]),v._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[v._v("被动触发")])]),v._v(" "),t("p",[v._v("第三方 过期时间点  发消息"),t("br"),v._v("\nRedis/RocketMQ")]),v._v(" "),t("p",[v._v("已过期:")]),v._v(" "),t("ol",[t("li",[v._v("一定要标识出Status=3？")]),v._v(" "),t("li",[v._v("标识出来就一定可信吗？")])])])}),[],!1,null,null,null);_.default=r.exports}}]);